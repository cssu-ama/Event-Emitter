# ๐ฆ EventEmitter

๐ **ุชูุถุญุงุช**

๐น ุงู ูุฎุฒู ุดุงูู ูพุงุฏูโุณุงุฒ ฺฉูุงุณ **EventEmitter** ุงุณุช ฺฉู ุฑุงุจุท ูุดุงุจู EventEmitter ุฏุฑ Node.js ุง EventTarget ุฏุฑ DOM ุฏุงุฑุฏ (ุจุง ฺูุฏ ุชูุงูุช ุณุงุฏู).

๐น ูุฏู: ุงูฺฉุงู ุซุจุช (subscribe) ู ูุบู ุซุจุช (unsubscribe) ุดูููุฏูโูุง ู ููุชุดุฑ ฺฉุฑุฏู (emit) ุฑูุฏุงุฏูุง ู ุจุงุฒฺฏุฑุฏุงูุฏู ุฎุฑูุฌ ฺฉุงูโุจฺฉโูุง.

---

## โ๏ธ API

### `new EventEmitter()`

๐ธ ฺฉ ููููู ุฌุฏุฏ ุงุฒ EventEmitter ูโุณุงุฒุฏ.

### `subscribe(eventName: string, callback: Function): { unsubscribe: Function }`

๐ธ ูพุงุฑุงูุชุฑูุง:

* `eventName` โ ูุงู ุฑูุฏุงุฏ ุจู ุตูุฑุช ุฑุดุชู
* `callback` โ ุชุงุจุน ฺฉู ููฺฏุงู ูุฑุงุฎูุงู ุฑูุฏุงุฏ ุงุฌุฑุง ูโุดูุฏ

๐ธ ุฎุฑูุฌ:

* ฺฉ ุขุจุฌฺฉุช ฺฉู ูุชุฏ `unsubscribe()` ุฏุงุฑุฏุ ูุฑุงุฎูุงู ุงู ูุชุฏ ุจุงุนุซ ุญุฐู ฺฉุงูโุจฺฉ ุงุฒ ูุณุช ูุดุชุฑฺฉู ูโุดูุฏ ู `undefined` ุจุฑูโฺฏุฑุฏุงูุฏ.

### `emit(eventName: string, args?: any[]): any[]`

๐ธ ูพุงุฑุงูุชุฑูุง:

* `eventName` โ ูุงู ุฑูุฏุงุฏ
* `args` โ ุขุฑุงูโุง ุงุฒ ุขุฑฺฏููุงูโูุง ฺฉู ุจู ูุฑ ฺฉุงูโุจฺฉ ูพุงุณ ุฏุงุฏู ูโุดูุฏ (ุงุฎุชุงุฑ)

๐ธ ุฎุฑูุฌ:

* ุขุฑุงูโุง ุงุฒ ูุชุงุฌ ุจุฑฺฏุดุช ุชูุงู ฺฉุงูโุจฺฉโูุง ุจู ุชุฑุชุจ ฺฉู ุซุจุช ุดุฏูโุงูุฏ. ุฏุฑ ุตูุฑุช ูุจูุฏู ุดูููุฏูุ ุขุฑุงู ุฎุงู ุจุฑูโฺฏุฑุฏุฏ.

---

## ๐ ูุซุงู ุงุณุชูุงุฏู

```javascript
const EventEmitter = require('./eventEmitter'); // ุง import

const emitter = new EventEmitter();

const sub1 = emitter.subscribe('firstEvent', () => 5);
const sub2 = emitter.subscribe('firstEvent', () => 6);

console.log(emitter.emit('firstEvent')); // => [5, 6]

sub1.unsubscribe();
console.log(emitter.emit('firstEvent')); // => [6]
```

---

## ๐งช ุชุณุชโูุง

๐น ูโุชูุงูุฏ ูุงู `test/` ุง ุฑุงูููุง ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ ุชุง ุจุง `jest` ุง `mocha` ุชุณุชโูุง ุงุฌุฑุง ุดููุฏ. ูุซุงู ุชุณุช ุณุฑุน ุจุง Jest:

```javascript
test('emit returns callback results in order', () => {
  const emitter = new EventEmitter();
  emitter.subscribe('ev', () => 1);
  emitter.subscribe('ev', () => 2);
  expect(emitter.emit('ev')).toEqual([1,2]);
});
```

---

## โป๏ธ ูพฺุฏฺฏ ู ูฺฉุงุช ูพุงุฏูโุณุงุฒ

๐ธ ุฐุฎุฑูโุณุงุฒ ูุณูุฑูุง: ุงุฒ ุณุงุฎุชุงุฑ ูุงููุฏ `Map<string, Function[]>` ุงุณุชูุงุฏู ุดุฏู ุงุณุช.

๐ธ ุญุฐู ุดูููุฏู: ููฺฏุงู `unsubscribe` ุงุฒ `Array.prototype.splice` ุง ููุชุฑ ุงุณุชูุงุฏู ูโุดูุฏ.

